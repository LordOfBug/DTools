<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui" >
    
    <h:form styleClass="myForm">
    <h:panelGrid columns="1" cellspacing="5" width="100%">
    	
    	<h:outputText value="Active tasks" />
    	
    	<h:panelGroup id="activeItemsPnl">
    	<h:dataTable id="activeItemsTbl" value="#{appBean.activeConnectionsList}" var="connection" 
			styleClass="table" rowClasses="tableOddRow,tableEvenRow"
			cellpadding="0" cellspacing="10" width="100%">
			
			<h:column headerClass="col0 col1">
				<f:facet name="header">Status</f:facet>
				<p:graphicImage library="#{userBean.cssTheme}" name="img/run.png" />
			</h:column>
			
			<h:column headerClass="col0">
				<f:facet name="header">Item</f:facet>
				<p:link outcome="#{connection.outcome}" value="#{connection.name}">
				</p:link>
			</h:column>
			
			<h:column headerClass="col0">
				<f:facet name="header">Status</f:facet>
				<h:outputLabel value="Running..." />
			</h:column>
		</h:dataTable>
		</h:panelGroup>
		<p:poll interval="25" update="activeItemsPnl" />
    
    	<h:outputText value="Saved files" />
    	
    	<h:dataTable value="#{historyBean.sshResponsesList}" var="sshResponse" 
					styleClass="table"
					rowClasses="tableOddRow,tableEvenRow"
					cellpadding="0" cellspacing="10" width="100%">
					
					<h:column headerClass="col0 col1">
						<f:facet name="header">View</f:facet>
							<h:commandLink action="#{historyBean.openSshResponse(sshResponse)}">
							<p:graphicImage value="resources/#{userBean.cssTheme}/1_0/img/view-file.png" />
						</h:commandLink>
					</h:column>
					
					<h:column headerClass="col0">
						<f:facet name="header">File</f:facet>
							<h:commandLink action="#{historyBean.openSshResponse(sshResponse)}">
								<h:outputText value="#{sshResponse.filename}" />
							</h:commandLink>
					</h:column>
					
					<h:column headerClass="col0">
						<f:facet name="header">Host</f:facet>
						<h:outputText value="ssh://#{sshResponse.sshClient.username}@#{sshResponse.sshClient.hostname}:#{sshResponse.sshClient.port}" />
					</h:column>
					
					<h:column headerClass="col0">
						<f:facet name="header">Command</f:facet>
						<h:outputText value="#{sshResponse.command}" />
					</h:column>
					
					<h:column headerClass="col0">
						<f:facet name="header">Date</f:facet>
						<h:outputText value="#{sshResponse.date}" />
					</h:column>
					
					<h:column headerClass="col0 col1">
						<f:facet name="header">Delete</f:facet>
							<h:commandLink action="#{historyBean.deleteSshResponse(sshResponse)}">
							<p:graphicImage value="resources/#{userBean.cssTheme}/1_0/img/remove.png" />
						</h:commandLink>
					</h:column>
					
				</h:dataTable>
    	
    </h:panelGrid>
    </h:form>
    
</ui:composition>