<!DOCTYPE html>
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:dt="http://dtools.com/facelets">
    <h:head>
        <title>DTools</title>
        <h:outputStylesheet library="css" name="dstyles.css"/>
    </h:head>
    <h:body>
    	
    	<h:panelGrid columns="1" styleClass="background" cellpadding="0" cellspacing="0" width="100%">
    		
    		<ui:include src="/include/toolbar.xhtml"/>
    		
	        
			
			<h:outputText value="Home" />
			
			<br/>
			
			<h:outputText value="Favorites, History, Tasks" />
			
			<h:panelGrid columns="2" cellpadding="5" cellspacing="5" width="100%">
				
				<h:dataTable value="#{serversBean.serversList}" var="server" 
					styleClass="table"
					rowClasses="tableOddRow,tableEvenRow"
					cellpadding="0" cellspacing="0" width="10%">
					
					<h:column headerClass="col0 col1">
						<f:facet name="header">Status</f:facet>
						<h:form id="status">
							<h:commandLink action="#{serversBean.sendIcmpPingAction(server)}">
								<dt:icon img="#{serversBean.getStatusIcon(server.icmpPingStatus)}"/>
								<f:ajax render="status" />
							</h:commandLink>
						</h:form>
					</h:column>
					
					<h:column headerClass="col0">
						<f:facet name="header">Name</f:facet>
						<h:form>
							<h:commandLink>
								<h:outputText value="#{server.name}" />
							</h:commandLink>
						</h:form>
					</h:column>
					
					<h:column headerClass="col0">
						<f:facet name="header">Hostname</f:facet>
						<h:form>
							<h:commandLink>
								<h:outputText value="#{server.hostname}" />
							</h:commandLink>
						</h:form>
					</h:column>
					
				</h:dataTable>
				
				
				
				
				<h:dataTable value="#{historyBean.sshResponsesList}" var="sshResponse" 
					styleClass="table"
					rowClasses="tableOddRow,tableEvenRow"
					cellpadding="0" cellspacing="10" width="100%">
					
					<h:column headerClass="col0 col1">
						<f:facet name="header">View</f:facet>
						<h:form>
							<h:commandLink action="#{historyBean.openSshResponse(sshResponse)}">
							<dt:icon img="zoom"/>
						</h:commandLink>
						</h:form>
					</h:column>
					
					<h:column headerClass="col0">
						<f:facet name="header">File</f:facet>
						<h:form>
							<h:commandLink>
								<h:outputText value="#{sshResponse.filename}" />
							</h:commandLink>
						</h:form>
					</h:column>
					
					<h:column headerClass="col0">
						<f:facet name="header">Host</f:facet>
						<h:form>
							<h:commandLink>
								<h:outputText value="ssh://#{sshResponse.sshClient.username}@#{sshResponse.sshClient.hostname}:#{sshResponse.sshClient.port}" />
							</h:commandLink>
						</h:form>
					</h:column>
					
					<h:column headerClass="col0">
						<f:facet name="header">Command</f:facet>
						<h:form>
							<h:commandLink>
								<h:outputText value="#{sshResponse.command}" />
							</h:commandLink>
						</h:form>
					</h:column>
					
					<h:column headerClass="col0">
						<f:facet name="header">Date</f:facet>
						<h:form>
							<h:commandLink>
								<h:outputText value="#{sshResponse.date}" />
							</h:commandLink>
						</h:form>
					</h:column>
					
					<h:column headerClass="col0 col1">
						<f:facet name="header">Delete</f:facet>
						<h:form>
							<h:commandLink action="#{historyBean.deleteSshResponse(sshResponse)}">
							<dt:icon img="remove"/>
						</h:commandLink>
						</h:form>
					</h:column>
					
				</h:dataTable>
				
				
				
			</h:panelGrid>
			
        
        </h:panelGrid>
        
    </h:body>
</html>


