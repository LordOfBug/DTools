<!DOCTYPE html>
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:dt="http://dtools.com/ui">
    <h:head>
        <title>DTools</title>
    </h:head>
    <h:body>
    	
    	<h:outputStylesheet library="default" name="css/dstyles.css"/>
    	<p:growl id="growl" life="2000"/>
    	
    	<h:panelGrid columns="1" cellpadding="5" cellspacing="0" width="100%">
    		
    		<ui:include src="/include/ptoolbar.xhtml"/>
    		
    		<p:breadCrumb>
			    <p:menuitem value="Home" url="home.xhtml" />
			    <p:menuitem value="SNMP Simulator" url="snmpSimulator.xhtml" />
			    <p:menuitem value="#{snmpAgentBean.agent.name}" url="#" />
			</p:breadCrumb>
			
			
			
			<h:outputText value="Tables" styleClass="title" />
			
			
			<h:form>
				
				<p:commandButton value="New table" onclick="PF('addTableDlg#{snmpAgentBean.agent.name}').show();" />
			 				 	<p:dialog header="Add new table" widgetVar="addTableDlg#{snmpAgentBean.agent.name}" resizable="false">
			 				 		<h:panelGrid columns="2" cellpadding="2" cellspacing="0">
										<h:outputLabel for="tblName" value="Name: " />
										<p:inputText id="tblName" value="#{snmpAgentBean.newTableName}" required="false" 
											requiredMessage="Missing name">
										</p:inputText>
										<h:outputLabel for="tblOid" value="Table OID: " />
										<p:inputText id="tblOid" value="#{snmpAgentBean.newTableOID}" required="false" 
											requiredMessage="Missing name">
										</p:inputText>
										<f:facet name="footer">
							                <p:commandButton value="Add" action="#{snmpAgentBean.addSnmpTableAction()}" 
												update="growl tablesTbl tblName"
												oncomplete="PF('addTableDlg#{snmpAgentBean.agent.name}').hide();" />
							                <p:commandButton value="Cancel" onclick="PF('addTableDlg#{snmpAgentBean.agent.name}').hide();" />
							            </f:facet>
									</h:panelGrid>
			 				 	</p:dialog>
				
				<h:panelGrid columns="1" cellspacing="5" width="100%">
					<p:dataTable id="tablesTbl" value="#{snmpAgentBean.snmpTablesList}" var="table" >
						<p:column>
							<f:facet name="header">Table name</f:facet>
							<p:link outcome="snmpTable" value="#{table.name}">
								    <f:param name="agent" value="#{snmpAgentBean.agent.name}" />
								    <f:param name="snmpTableName" value="#{table.name}" />
								</p:link>
						</p:column>
						<p:column>
							<f:facet name="header">Table OID</f:facet>
							<p:link outcome="snmpTable" value="#{table.metadata.tableOid}">
								    <f:param name="agent" value="#{snmpAgentBean.agent.name}" />
								    <f:param name="snmpTableName" value="#{table.name}" />
								</p:link>
						</p:column>
						<p:column>
							<f:facet name="header">Actions</f:facet>
							<p:commandButton value="Delete" 
									action="#{snmpAgentBean.deleteDataTable(table)}" 
									update="growl tablesTbl" ajax="true" />
						</p:column>
					</p:dataTable>
				</h:panelGrid>
				
			</h:form>
			
			<h:outputText value="Trap scenarios list" styleClass="title" />
			
			<h:form>
				<p:commandButton value="New scenario" onclick="PF('addScenarioDlg#{snmpAgentBean.agent.name}').show();" />
			 				 	<p:dialog header="Add new scenario" widgetVar="addScenarioDlg#{snmpAgentBean.agent.name}" resizable="false">
			 				 		<h:panelGrid columns="2" cellpadding="2" cellspacing="0">
										<h:outputLabel for="scName" value="Name: " />
										<p:inputText id="scName" value="#{snmpAgentBean.newTrapsTableName}" required="false" 
											requiredMessage="Missing scenario name">
										</p:inputText>
										<f:facet name="footer">
							                <p:commandButton value="Add" action="#{snmpAgentBean.addTrapScenarioAction(snmpAgentBean.agent)}" 
												update="growl trapsTbl scName"
												oncomplete="PF('addScenarioDlg#{snmpAgentBean.agent.name}').hide();" />
							                <p:commandButton value="Cancel" onclick="PF('addScenarioDlg#{snmpAgentBean.agent.name}').hide();" />
							            </f:facet>
									</h:panelGrid>
			 				 	</p:dialog>
				<h:panelGrid columns="1" cellspacing="5" width="100%">
					<p:dataTable id="trapsTbl" value="#{snmpAgentBean.trapsTableList}" var="table" >
						<p:column>
							<f:facet name="header">Trap scenario name</f:facet>
							<p:link outcome="snmpTrapsTable" value="#{table.name}">
								    <f:param name="agent" value="#{snmpAgentBean.agent.name}" />
								    <f:param name="trapsTableName" value="#{table.name}" />
								</p:link>
						</p:column>
						<p:column>
							<f:facet name="header">Actions</f:facet>
							<p:commandButton value="Delete" 
									action="#{snmpAgentBean.deleteTrapsTable(table)}" 
									update="growl trapsTbl" ajax="true" />
						</p:column>
					</p:dataTable>
				</h:panelGrid>
				
			</h:form>
        
        </h:panelGrid>
        
    </h:body>
</html>
